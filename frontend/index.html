<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="disclaimer" id="disclaimer">
        Disclaimer: All medicine names and prices used in this application are fictional and do not represent any real medicine(s).
    </div>
    <header>
        <h1>Medicine Tracker</h1>
    </header>
    <main>
        <div class="form-container">
            
            <!-- Search Medicine Form -->
            <h2>Search Medicine</h2>
            <form id="search-medicine-form" action="" method="GET" onsubmit="event.preventDefault(); searchMedicine();"></form>
                <label for="search-medicine">Medicine Name:</label>
                <input type="text" id="search-medicine" name="med-to-search" placeholder="Enter Medicine Name Here" required>
                <button type="submit">Search</button>
            </form>
            <script>
            function searchMedicine() {
                const name = document.getElementById('search-medicine').value;
                fetch(`http://0.0.0.0:8000/medicines/${encodeURIComponent(name)}`)
                    .then(response => response.json())
                    .then(data => {
                        alert(`Medicine: ${data.name}\nPrice: ${data.price}`);
                    })
                    .catch(error => {
                        alert('Medicine not found.');
                    });
            }
            </script>

            <!-- Update Medicine Form -->
            <h2>Update Medicine Price</h2>
            <form id="update-medicine-form" action="http://0.0.0.0:8000/update" method="POST" onsubmit="event.preventDefault(); updateMedicine();">
                <label for="update-med-ID">Medicine Name:</label>
                <input type="text" id="update-med-ID" name="name" placeholder="Enter Medicine Name Here" required>
                
                <label for="update-new-price">New Price:</label>
                <input type="number" id="update-new-price" name="price" required>
                
                <button type="submit">Update Price</button>
            </form>
            <script>
            function updateMedicine() {
                const name = document.getElementById('update-med-ID').value;
                const price = document.getElementById('update-new-price').value;
                const formData = new FormData();
                formData.append('name', name);
                formData.append('price', price);

                fetch('http://0.0.0.0:8000/update', {
                    method: 'POST',
                    body: formData
                })
                .then(response => response.json())
                .then(data => {
                    if (data.message) {
                        alert(data.message);
                    } else if (data.error) {
                        alert(data.error);
                    }
                })
                .catch(error => {
                    alert('Error updating medicine.');
                });
            }
            </script>

            <!-- Create Medicine Form - Incomplete-->
            <h2>Add New Medicine</h2>
            <form id="create-medicine-form" action = "http://0.0.0.0:8000/medicines" method="POST">
                <label for="medicine-name">Medicine Name:</label>
                <input type="text" id="medicine-name" name="medicine-name" placeholder="Enter Medicine Name Here" required>
                
                <label for="medicine-price">Price:</label>
                <input type="number" id="medicine-price" name="medicine-price" placeholder="Enter Price Here" required>
                
                <button type="submit">Add Medicine</button>
            </form>

            <!-- Delete Medicine Form -->
            <h2>Delete Medicine</h2>
            <form id="delete-medicine-form" action = "http://0.0.0.0:8000/delete" method="POST">
                <label for="delete-medicine-id">Medicine Name:</label>
                <input type="text" id="delete-medicine-id" name="delete-medicine-id" placeholder="Enter Medicine Name Here" required>
                
                <button type="submit">Delete Medicine</button>
            </form>

        </div>
        <div class="medicines-list">
            <h2>Current Medicines List</h2>
            <ul id="medicines"></ul>
            <script>
            document.addEventListener('DOMContentLoaded', function() {
                if (typeof getMeds === 'function') {
                    getMeds('medicines');
                }
            });
            </script>
        </div>
        
    </main>
    <script src="script.js"></script>
</body>
</html>